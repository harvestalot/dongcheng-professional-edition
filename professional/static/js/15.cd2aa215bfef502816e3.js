webpackJsonp([15],{ISiS:function(t,e){},i25Z:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("Dd8w"),i=a.n(n),s={components:{},data:function(){return{mainMapLayer:this.$parent.mapLayerOption.base,polygonLayer:this.$parent.viewLayerOption.polygon,markers:[],company_total:0,pie_chart_data:[],current_enterprise_type:"",street_names:[],format_street_names:{andingmen:"安定门",beixinqiao:"北新桥",chaoyangmen:"朝阳门",chongwenmenwai:"崇文门外",donghuamen:"东华门",donghuashi:"东花市",dongsi:"东四",dongzhimen:"东直门",hepingli:"和平里",jianguomen:"建国门",jiaodaokou:"交道口",jingshan:"景山",longtan:"龙潭",qianmen:"前门",tiantan:"天坛",tiyugan:"体育馆",yongdingmenwai:"永定门外"},registered_capital_data:[],company_data:[],ranking_list_data:{}}},computed:{},watch:{},created:function(){},mounted:function(){this.mainMapLayer.setStatus({zoomEnable:!0}),this.get_company_data()},methods:{onChangeLayer:function(t){this.current_enterprise_type=t||this.pie_chart_data[0].name,this.get_community_enterprise()},get_industry_developing_compamy_layer:function(){var t=this,e=this;this.http.getLocalhostJson("/static/json/street_boundary_data.json",function(a){var n=[];a.forEach(function(e){e.properties.value=t.ranking_list_data[e.properties.name.split("街道")[0]][0],n.push(e)}),t.polygonLayer.setData(n,{lnglat:"lnglat"}),t.polygonLayer.setOptions({style:{opacity:.5,color:function(t){var a=1*t.value.properties.value,n=e.$Basice.chromatic_gradient,i="";switch(!0){case a>=1&&a<=10:i=n[0];break;case a>10&&a<=20:i=n[1];break;case a>20&&a<=30:i=n[2];break;case a>30&&a<=40:i=n[3];break;case a>40&&a<=50:i=n[4];break;case a>50&&a<=100:i=n[5];break;case a>100&&a<=200:i=n[6];break;case a>200:i=n[7]}return i}}}),t.polygonLayer.render(),t.polygonLayer.show()})},get_company_data:function(){var t=this;this.http.get("Enterprise/getCommpanyNumber",{},function(e){if(e.success){var a=JSON.parse(Decrypt(e.data.results.key));t.company_data=a,t.http.get("Enterprise/getCommpanyRegister",{},function(e){if(e.success){var n=JSON.parse(Decrypt(e.data.results.key));t.registered_capital_data=n,t.get_view_data(a)}})}})},get_community_enterprise:function(){var t=this,e=this.company_data.filter(function(e){return e.type===t.current_enterprise_type}),a=this.registered_capital_data.filter(function(e){return e.type===t.current_enterprise_type});for(var n in e[0])"type"!==n&&"id"!==n&&"total"!==n&&(this.ranking_list_data[this.format_street_names[n]]=[e[0][n],a[0][n]]);this.get_industry_developing_compamy_layer()},get_view_data:function(t){for(var e=0;e<t.length;e++){var a=t[e];this.company_total+=1*a.total,this.pie_chart_data.push({name:a.type,value:1*a.total})}this.current_enterprise_type=this.pie_chart_data[0].name,this.get_community_enterprise(),this.load_industrial_development_pie_chart()},load_industrial_development_pie_chart:function(){var t=echarts.init(document.getElementById("industrial_development_pie_content")),e={color:this.$Basice.colors,title:[i()({text:"街道各类企业占比数"},this.$Basice.echart_title),{text:this.company_total,subtext:"企业数量",textStyle:{fontSize:28,color:"#f0b33c"},subtextStyle:{fontSize:16,color:"#222"},textAlign:"center",x:"34.5%",y:"44%"}],tooltip:{trigger:"item",formatter:function(t){return t.seriesName+"</br>"+t.data.name+"</br>数量："+t.data.value+"</br>占比："+t.percent+"%"}},legend:{type:"scroll",orient:"vertical",right:"5%",align:"left",top:"middle",textStyle:{color:"#8C8C8C"},height:200,pageIconColor:"#f0b33c",pageIconInactiveColor:"#2f4554",formatter:function(t){return t.slice(0,3)+"..."}},series:[{name:"企业",type:"pie",center:["35%","50%"],radius:["30%","45%"],clockwise:!1,avoidLabelOverlap:!1,label:{normal:{show:!0,position:"outter",formatter:function(t){return t.data.name.slice(0,3)+"..."}}},labelLine:{normal:{show:!0,length:10,length2:5,smooth:!0}},data:this.pie_chart_data}]};t.setOption(e,!0),t.dispatchAction({type:"pieSelect",seriesIndex:0,dataIndex:0}),t.dispatchAction({type:"showTip",seriesIndex:0,dataIndex:0});var a=this;t.on("click",function(e){t.dispatchAction({type:"pieUnSelect",seriesIndex:0,dataIndex:0}),t.dispatchAction({type:"hideTip",seriesIndex:0,dataIndex:0}),a.current_enterprise_type=e.name,a.get_community_enterprise()}),window.onresize=function(){t.resize()}}}},r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"main_content"},[a("div",{staticClass:"layer_content"},[a("a-select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择服务类型",allowClear:""},on:{change:t.onChangeLayer},model:{value:t.current_enterprise_type,callback:function(e){t.current_enterprise_type=e},expression:"current_enterprise_type"}},t._l(t.company_data,function(e,n){return a("a-select-option",{key:n,attrs:{value:e.type}},[t._v(t._s(e.type))])}),1)],1),t._v(" "),a("div",{staticClass:"map_legend chromatic_gradient_map_legend"},[a("a-row",[a("a-col",{staticClass:"chromatic_gradient",attrs:{span:24}},[a("span"),t._v("  1 - 10\n            ")]),t._v(" "),a("a-col",{staticClass:"mt_10 chromatic_gradient",attrs:{span:24}},[a("span"),t._v("  11 - 20\n            ")]),t._v(" "),a("a-col",{staticClass:"mt_10 chromatic_gradient",attrs:{span:24}},[a("span"),t._v("  21 - 30\n            ")]),t._v(" "),a("a-col",{staticClass:"mt_10 chromatic_gradient",attrs:{span:24}},[a("span"),t._v("  31 - 40\n            ")]),t._v(" "),a("a-col",{staticClass:"mt_10 chromatic_gradient",attrs:{span:24}},[a("span"),t._v("  41 - 50\n            ")]),t._v(" "),a("a-col",{staticClass:"mt_10 chromatic_gradient",attrs:{span:24}},[a("span"),t._v("  51 - 100\n            ")]),t._v(" "),a("a-col",{staticClass:"mt_10 chromatic_gradient",attrs:{span:24}},[a("span"),t._v("  101 - 200\n            ")]),t._v(" "),a("a-col",{staticClass:"mt_10 chromatic_gradient",attrs:{span:24}},[a("span"),t._v("  200以上\n            ")])],1)],1),t._v(" "),a("div",{staticClass:"echarts_content animated fadeInRight"},[a("div",{staticClass:"echarts_content_sub"},[t._m(0),t._v(" "),a("div",{staticClass:"chart_content_box"},[a("div",{staticClass:"h_100",attrs:{id:"ranking_list_content"}},[a("div",{staticClass:"ml_15 mb_10 ft_16"},[a("span",{staticClass:"main_c"},[t._v("[ "+t._s(t.current_enterprise_type)+" ]")]),t._v(" 的企业数量和资本看板")]),t._v(" "),a("div",{staticClass:"ranking_list"},[a("div",{staticClass:"ranking_list_overflow"},t._l(t.ranking_list_data,function(e,n,i){return a("a-row",{key:i,staticClass:"ranking_item"},[a("a-col",{attrs:{span:6,offset:1}},[t._v(t._s(n))]),t._v(" "),a("a-col",{attrs:{span:5}},[t._v(t._s(e[0]))]),t._v(" "),a("a-col",{attrs:{span:12}},[t._v(t._s(e[1]))])],1)}),1)])])])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"chart_content_box"},[e("div",{staticClass:"h_100",attrs:{id:"industrial_development_pie_content"}})])}]};var o=a("VU/8")(s,r,!1,function(t){a("ISiS")},"data-v-7db5e4ea",null);e.default=o.exports}});