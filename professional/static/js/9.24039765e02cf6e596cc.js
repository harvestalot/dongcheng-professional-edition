webpackJsonp([9],{"7XeC":function(t,i){},DCH9:function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=e("Dd8w"),a=e.n(n),r={name:"LineAreaChart",props:{lineAreaChartOption:{type:Object,default:function(){}}},data:function(){return{lineChartOption:this.lineAreaChartOption}},watch:{"lineAreaChartOption.line_name":function(t){t&&(this.lineAreaChartOption=this.$props.lineAreaChartOption,this.load_bar_stack_chart(),console.log(this.lineAreaChartOption))}},mounted:function(){this.load_bar_stack_chart()},methods:{load_bar_stack_chart:function(){var t=echarts.init(document.getElementById(this.lineChartOption.id)),i={color:this.$Basice.colors,title:a()({text:this.lineChartOption.title},this.$Basice.echart_title),tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},grid:this.$Basice.grid,xAxis:{type:"category",data:this.lineChartOption.xAxis_data,axisLabel:a()({},this.$Basice.coordinate_axis_style.axisLabel,{formatter:function(t){return t.split("").join("\n")}}),axisLine:this.$Basice.coordinate_axis_style.axisLine,splitLine:this.$Basice.coordinate_axis_style.splitLine},yAxis:a()({type:"value",name:"数量"},this.$Basice.coordinate_axis_style),series:[{name:this.lineChartOption.line_name,type:"line",stack:"a",barCategoryGap:5,data:this.lineChartOption.line_series_data}]};t.setOption(i,!0),window.onresize=function(){t.resize()}}}},o={render:function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"h_100"},[i("div",{staticClass:"h_100",attrs:{id:this.lineChartOption.id}})])},staticRenderFns:[]};var s={components:{LineAreaChart:e("VU/8")(r,o,!1,function(t){e("OLwP")},"data-v-4fc8453c",null).exports},data:function(){return{mainMapLayer:this.$parent.mapLayerOption.base,timelineHeatLayer:this.$parent.viewLayerOption.timelineHeat,polygonLayer:this.$parent.viewLayerOption.polygon,isPlayInterval:!1,timeline_control_icon_1:"../../../../static/img/monitor/bofang.png",timeline_control_icon_2:"../../../../static/img/monitor/zanting.png",current_index:0,currentTime:"00:00",time_line_data:[{time:"00:00",time_point:!0,current_time_point:!1},{time:"01:00",time_point:!0,current_time_point:!1},{time:"02:00",time_point:!0,current_time_point:!1},{time:"03:00",time_point:!0,current_time_point:!1},{time:"04:00",time_point:!0,current_time_point:!1},{time:"05:00",time_point:!0,current_time_point:!1},{time:"06:00",time_point:!0,current_time_point:!1},{time:"07:00",time_point:!0,current_time_point:!1},{time:"08:00",time_point:!0,current_time_point:!1},{time:"09:00",time_point:!0,current_time_point:!1},{time:"10:00",time_point:!0,current_time_point:!1},{time:"11:00",time_point:!0,current_time_point:!1},{time:"12:00",time_point:!0,current_time_point:!1},{time:"13:00",time_point:!0,current_time_point:!1},{time:"14:00",time_point:!0,current_time_point:!1},{time:"15:00",time_point:!0,current_time_point:!1},{time:"16:00",time_point:!0,current_time_point:!1},{time:"17:00",time_point:!0,current_time_point:!1},{time:"18:00",time_point:!0,current_time_point:!1},{time:"19:00",time_point:!0,current_time_point:!1},{time:"20:00",time_point:!0,current_time_point:!1},{time:"21:00",time_point:!0,current_time_point:!1},{time:"22:00",time_point:!0,current_time_point:!1},{time:"23:00",time_point:!0,current_time_point:!1}],street_names:[],legend_data:["居住人口就业地","就业人口居住地"],office_residence_ratio_data:[],line_chart_data:{"居住人口就业地":[],"就业人口居住地":[]},chartOption_1:{isSuccess:!1,id:"line_area_chart_content_1",title:"01:00 ~ 12:00时人流量变化",line_name:"崇文门外商圈",xAxis_data:["01:00","02:00","03:00","04:00","05:00","06:00","07:00","08:00","09:00","10:00","11:00","12:00"],line_series_data:[]},chartOption_2:{isSuccess:!1,id:"line_area_chart_content_2",title:"13:00 ~ 24:00时人流量变化",line_name:"崇文门外商圈",xAxis_data:["13:00","14:00","15:00","16:00","17:00","18:00","19:00","20:00","11:00","22:00","23:00","24:00"],line_series_data:[]}}},computed:{},watch:{},mounted:function(){var t=this;this.mainMapLayer.setStatus({zoomEnable:!0}),this.get_statistics_chart_data(),this.get_people_activities_layer(),this.load_vitality_important_area_layer(),this.time_line_data.filter(function(i){return i.time===t.currentTime})[0].current_time_point=!0},methods:{handle_timeline_control:function(){this.isPlayInterval=!this.isPlayInterval,this.isPlayInterval?this.paly_timeline():window.clearInterval(this.$Basice.timer)},paly_timeline:function(){var t=this;this.$Basice.timer=setInterval(function(){t.current_index++,t.currentTime=t.time_line_data[t.current_index].time,t.time_line_data.forEach(function(t){t.current_time_point=!1}),t.time_line_data.filter(function(i){return i.time===t.currentTime})[0].current_time_point=!0,t.get_people_activities_layer(),23===t.current_index&&(t.current_index=0)},5e3)},get_current_time_layer:function(t,i){var e=this;this.current_index=t,this.currentTime=i,this.time_line_data.forEach(function(t){t.current_time_point=!1}),this.time_line_data.filter(function(t){return t.time===e.currentTime})[0].current_time_point=!0,this.get_people_activities_layer()},get_people_activities_layer:function(){var t=this;this.http.getLocalhostJson("/static/json/monitor/people_activities.csv",function(i){var e=t;t.timelineHeatLayer.setData(i,{value:function(t){if(t){var i=t[e.currentTime];return i}},lnglat:function(t){if(t.value){var i=t.value,e=wgs84togcj02(i.LON,i.LAT);return e}},type:"csv"}),t.timelineHeatLayer.setOptions({style:{radius:18,color:{.1:"#2892C6",.2:"#81B3AA",.3:"#BFD38B",.4:"#FAFA64",.5:"#FCB344",.7:"#FD0100",1:"#A80000"}}}),t.timelineHeatLayer.render(),t.timelineHeatLayer.show()})},load_vitality_important_area_layer:function(){var t=this,i=this;this.http.getLocalhostJson("/static/json/monitor/important_culture_area_border_data.json",function(e){t.polygonLayer.setData(e,{lnglat:"lnglat"}),t.polygonLayer.setOptions({style:{color:function(t){var e=t.value.properties.type,n=i.$Basice.chromatic_gradient,a="";switch(e){case"音乐":a=n[1];break;case e>.51&&e<.8:a=n[2];break;case e>.81&&e<1:a=n[3];break;case e>1.01&&e<1.2:a=n[4];break;case e>1.21&&e<1.4:a=n[5];break;case e>1.41&&e<1.6:a=n[6];break;case e>1.61&&e<2.24:a=n[7];break;default:a=n[7]}return a}}}),t.polygonLayer.render(),t.polygonLayer.show(),t.polygonLayer.on("click",function(t){var e=t.rawData.properties.name;i.chartOption_1.line_name=e,i.chartOption_2.line_name=e,i.get_view_data(e)})})},get_timeline:function(){var t=echarts.init(document.getElementById("timeline")),i={timeline:{left:10,right:10,bottom:10,axisType:"category",autoPlay:!0,playInterval:5e3,controlStyle:{position:"right",showNextBtn:!1,showPrevBtn:!1,itemGap:20,color:"#F0B33C",borderColor:"#F0B33C"},data:this.time_line_data,checkpointStyle:{symbolSize:16,color:"#F0B33C"},lineStyle:{color:"#F0B33C"},label:{color:"#fff",lineHeight:30}}};t.setOption(i,!0);var e=this;console.log(window),t.off("timelinechanged"),t.on("timelinechanged",function(t){console.log(t),e.currentTime=e.time_line_data[t.currentIndex],e.get_people_activities_layer()})},get_statistics_chart_data:function(){var t=this;this.http.get("vitality/getPopulationVitality",{},function(i){if(i.success){var e=JSON.parse(Decrypt(i.data.results.resultKey));t.visitors_flow_rate_data=e,t.get_view_data(t.chartOption_1.line_name)}})},get_view_data:function(t){this.chartOption_1.isSuccess=!1,this.chartOption_2.isSuccess=!1;for(var i=this.visitors_flow_rate_data.filter(function(i){return i.keyArea===t}),e=[],n=[],a=0;a<24;a++)1<=a&&a<=12?e.push(i[0]["sumPeop"+a]):13<=a&&a<=23&&n.push(i[0]["sumPeop"+a]);n.push(i[0].sumPeop0),this.chartOption_1={isSuccess:!0,id:"line_area_chart_content_1",title:"01:00 ~ 12:00时人流量变化",line_name:t,xAxis_data:["01:00","02:00","03:00","04:00","05:00","06:00","07:00","08:00","09:00","10:00","11:00","12:00"],line_series_data:e},this.chartOption_2={isSuccess:!0,id:"line_area_chart_content_2",title:"13:00 ~ 24:00时人流量变化",line_name:t,xAxis_data:["13:00","14:00","15:00","16:00","17:00","18:00","19:00","20:00","11:00","22:00","23:00","24:00"],line_series_data:n},this.load_line_chart(this.chartOption_1),this.load_line_chart(this.chartOption_2)},load_line_chart:function(t){var i=echarts.init(document.getElementById(t.id)),e={color:this.$Basice.colors,title:a()({text:t.line_name+t.title},this.$Basice.echart_title),tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},grid:a()({},this.$Basice.grid,{left:60}),xAxis:{type:"category",data:t.xAxis_data,axisLabel:a()({},this.$Basice.coordinate_axis_style.axisLabel,{formatter:function(t){return t.split("").join("\n")}}),axisLine:this.$Basice.coordinate_axis_style.axisLine,splitLine:this.$Basice.coordinate_axis_style.splitLine},yAxis:a()({type:"value",name:"数量"},this.$Basice.coordinate_axis_style),series:[{name:t.line_name,type:"line",stack:"a",barCategoryGap:5,data:t.line_series_data}]};i.setOption(e,!0),window.onresize=function(){i.resize()}}},created:function(){}},c={render:function(){var t=this,i=t.$createElement,n=t._self._c||i;return n("div",{staticClass:"main_content"},[n("div",{staticClass:"echarts_content animated fadeInRight"},[n("div",{staticClass:"echarts_content_sub"},[n("div",{staticClass:"chart_content_box"},[n("div",{staticClass:"h_100",attrs:{id:this.chartOption_1.id}})]),t._v(" "),n("div",{staticClass:"chart_content_box"},[n("div",{staticClass:"h_100",attrs:{id:this.chartOption_2.id}})]),t._v(" "),n("div",{staticClass:"source_content"},[t._v("注：点击所选重点区域，右侧将显示该区域.24小时人流量变化情况")])])]),t._v(" "),n("div",{staticClass:"timeline",attrs:{id:"timeline"}},[n("a-row",[n("a-col",{attrs:{span:1}},[t.isPlayInterval?n("div",{staticClass:"timeline_control",on:{click:t.handle_timeline_control}},[n("img",{attrs:{src:e("MKYK"),alt:""}})]):n("div",{staticClass:"timeline_control",on:{click:t.handle_timeline_control}},[n("img",{attrs:{src:e("TX71"),alt:""}})])]),t._v(" "),n("a-col",{attrs:{span:23}},[n("a-row",t._l(t.time_line_data,function(i,e){return n("a-col",{key:e,attrs:{span:1},on:{click:function(n){return t.get_current_time_layer(e,i.time)}}},[n("p",{staticClass:"time_line_style"},[n("span",{class:{time_point:i.time_point,current_time_point:i.current_time_point}})]),t._v("\n                        "+t._s(i.time)+"\n                    ")])}),1)],1)],1)],1)])},staticRenderFns:[]};var l=e("VU/8")(s,c,!1,function(t){e("7XeC")},"data-v-2dc0efa7",null);i.default=l.exports},MKYK:function(t,i){t.exports="data:image/png;base64,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"},OLwP:function(t,i){},TX71:function(t,i){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgEAYAAAAj6qa3AAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAAAZiS0dEAAAAAAAA+UO7fwAAAAlwSFlzAAAASAAAAEgARslrPgAABktJREFUaN7dmXtQlFUYxp/3Y5dFWbwUGXThstxGwACBypxU0DK8DI0iXZSsVHQo6KKQy0WgYEmIPyJNIhkpLU3QRkssJxAKZZxEUBANcFesBlRMdMBYFvbtD/3WBoZZzc9dp99/3+6355zn2TPnPOc9BIk5vdnn9SRvB4eBKoNGZjd3LuIAagoPh4o28MXAQHoTGhS5ufE3fAwvjRsn/o5eoMnY3t3NMdiOCp0OdUjG2YYGjoE/vVNZKagVi2Vx+/b5lTVHZ1JPj1TjpTtt4GSUKydGOTlhv02MbEdaGl/GTKpZuhQtlIUD9vaSOevNqXi2txeHocfYkhL+kY9iywcfTMrRbdYUnD9vMQNa3/QsiC9XKPo+4XhlhFpNx7iGQlevhoJexbNKpWSCzaHnEhzo6aEc1PJ3eXmAnZut04cfXp8h/f2SG/BboXdsOjs6Dvw0MMtQWlbGGaRGw/TpFhNsTkgErqLs8GHjEmMknluw4FZnhmDuheYFHj+kyf38DL6DOkN7Xd29JlyE92MMop56ipyEUWg5cuRklGeBusPX9z8bIP7jfJztBmv27sV90KLIxcXaQs0yE+WY7OrKT3MrvVZefny1qjOdJ0y4ZQOO/ho8OXaFXG6a6ntoGfaoVNbW9V+NsHmXFhtqd+8W1y6zBihCuuvuL0pJuVen+m1zGWfx/dSp/Z3GaIe1aWkjGiBuZ6ZV/X8GP0+B2LFmzfHV3kdSXdzdhxkg7uOSbWdN8EAKMy7gL4S3tWEi70KswWA1BwJhj20Khc3PgxuNTe+9ZzJATG6mACMRZIs9qEpJ8Q8/c1kzy8trMEmmF6b5+NAznEi7DhywmhGFvALhixefjPLdmc5KpWCKrBInt0FP+Bt/uSk0IL/liaxzOp1fh3ZV9m+zZ/NXNAo9MTGUAR0cLl60mAE3ZrhRph9jUM6ZI5iyuoWZlNPWpCnYtk02y2a5fK2vL2VwCdVu3Wqp/ukMvkZHeLggHlIsbYCIz6qWokzq6vIr0z6dffCVV3gtvcXxM2YgC2F4vKXlrnXswDGYGRAgIIuXwvHmqmhtJn3flpDjXF3dt+ZaqDwyKIgy8DB68vIoinNxfmBAqn7od4rngyqVDMvhjOgxY6wtfCghIR0rM+natetPSUmNPR656kcbG+ksQDFffnmn7XM6uunc2LFmzwL3DB3IEdbe+invVhGwGR3YefWqtfUNhRlIZ0ForFV1pryQkECu/Dz7FRdL1T5lYhy7XLkiIJW+QJdOZ23BIs0pqsLU9V5ezYtUOw2llZXkQFPZ4+OPpd6m+VH+hMK0Whk+xXY8UV+PaADRoaGWFnw9kNjaGkv1i/qRnGw8zr3GF9VqyCgAV2xt71a/9DLp0NrQIIg1N0sLb3zA45I6fMoUju0LNGyqr6eT8KSU9HTIKAAed0+4iR+oj09VVAhisdFUc5MIGyXetyl95BHxWYyeTRM9xif/VFBAK5FG/jU1eIgi8If5woVk3CilDbiO1hsS9+83lcSaqlSFyfUbNsCR8lD6xhtSdQQlqjH64EFUkDMCQ0IwDRoonZ0tJngIlIHvELtpk1/ZGV+NW1ycyYBGtfvy5IQHHyRvysLs1laE0lQccnCw1kAlpwG9WKLXC+OM3WTn4+M7T9eXrWpvN+UAsYhI9liCGfn51h6v5OxFCQWvXy8KFz8eFoT+dh//V9fbGg1lcA4Cq6utPe475jQiUVxTQ0bFVdm17OyhXw8zICS07ljR5waDMN22mgsXLqRILkakVmttHbdNBebgWHv7YC0nyTsXLhzpvmDEKDwx/vTGnMpLlxAknGCX+fPFBq2tyxyUwYmo1unwozBKKIyICMjXOmXShQsjvW/2LOBX1paQ49zcbCPIjdwfHEyzeR+nVVVZW+gwxsMN8w4dMnrxUQRPmeJf3pqb5XbqlFnDbrcfMbkBfdMMAevWcSqUmJiYaLEAI3JjVYcdXkZYbi7tUDwp78zKumtXYyMhVllNxcYbNTfJ7wpNd4F0P8q2bqVXjZPJOHxVv13u2IDhhjyWt2aJvb3wZ+8k22/nzhVm4RzkYWGs5V40BAVRKX3Gju7uXMpHadm/rscXUQgXd3fzIl5JXTodqcgegfX1eJLWU1xl5cCW0av058rLA/JPJH60TbrE+g9kY8qLxu78yQAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAyMC0wMi0wOVQxNjoxODo0MiswODowMJyB+H4AAAAldEVYdGRhdGU6bW9kaWZ5ADIwMjAtMDItMDlUMTY6MTg6NDIrMDg6MDDt3EDCAAAAUHRFWHRzdmc6YmFzZS11cmkAZmlsZTovLy9ob21lL2FkbWluL2ljb24tZm9udC90bXAvaWNvbl92c2gxbnRmaDd4L2ljb25mb250LWVkdTAzLnN2Z2xrfSQAAAAASUVORK5CYII="}});