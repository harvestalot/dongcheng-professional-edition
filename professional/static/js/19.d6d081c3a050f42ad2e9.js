webpackJsonp([19],{Ws3C:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("bOdI"),i=a.n(s),o=a("Dd8w"),n=a.n(o),r=i()({name:"Population",inject:["reload"],components:{},data:function(){return{mainMapLayer:this.$parent.mapLayerOption.base,heatLayer:this.$parent.viewLayerOption.heat,polygonLayer:this.$parent.viewLayerOption.polygon,layer_type_code:"",street_names:[],legend_data:["居住人口就业地","就业人口居住地"],office_residence_ratio_data:[],line_chart_data:{"居住人口就业地":[],"就业人口居住地":[]}}},computed:{},watch:{},methods:{},created:function(){},mounted:function(){this.get_statistics_chart_data()}},"methods",{onChangeLayer:function(t){switch(this.layer_type_code=t,this.heatLayer.hide(),this.polygonLayer.hide(),t){case"1":this.get_resident_population_layer();break;case"2":this.get_employed_population_layer();break;case"3":this.get_resident_population_employment_place_layer();break;case"4":this.get_employment_population_place_layer();break;case"5":this.get_office_residence_ratio_layer();break;default:this.heatLayer.hide(),this.polygonLayer.hide()}},get_resident_population_layer:function(){var t=this;this.http.getLocalhostJson("/static/json/scale/resident_population.json",function(e){t.heatLayer.setData(e,{lnglat:"lnglat"}),t.heatLayer.setOptions({style:{radius:16,color:{.5:"#2c7bb6",.65:"#abd9e9",.7:"#ffffbf",.9:"#fde468",1:"#d7191c"}}}),t.heatLayer.render(),t.heatLayer.show()})},get_resident_population_employment_place_layer:function(){var t=this;this.http.getLocalhostJson("/static/json/scale/resident_population_employment_place.json",function(e){t.heatLayer.setData(e,{lnglat:"lnglat"}),t.heatLayer.setOptions({style:{radius:16,color:{.5:"#2c7bb6",.65:"#abd9e9",.7:"#ffffbf",.9:"#fde468",1:"#d7191c"}}}),t.heatLayer.render(),t.heatLayer.show()})},get_employed_population_layer:function(){var t=this;this.http.getLocalhostJson("/static/json/scale/employed_population.json",function(e){t.heatLayer.setData(e,{lnglat:"lnglat"}),t.heatLayer.setOptions({style:{radius:16,color:{.5:"#2c7bb6",.65:"#abd9e9",.7:"#ffffbf",.9:"#fde468",1:"#d7191c"}}}),t.heatLayer.render(),t.heatLayer.show()})},get_employment_population_place_layer:function(){var t=this;this.http.getLocalhostJson("/static/json/scale/employment_population_place.json",function(e){t.heatLayer.setData(e,{lnglat:"lnglat"}),t.heatLayer.setOptions({style:{radius:16,color:{.5:"#2c7bb6",.65:"#abd9e9",.7:"#ffffbf",.9:"#fde468",1:"#d7191c"}}}),t.heatLayer.render(),t.heatLayer.show()})},get_office_residence_ratio_layer:function(){var t=this,e=this;this.http.getLocalhostJson("/static/json/scale/office_residence_ratio.json",function(a){t.polygonLayer.setData(a,{lnglat:"lnglat"}),t.polygonLayer.setOptions({style:{color:function(t){var a=t.value.value,s=e.$Basice.chromatic_gradient,i="";switch(!0){case a>.23&&a<.35:i=s[1];break;case a>.36&&a<.45:i=s[2];break;case a>.46&&a<.55:i=s[3];break;case a>.56&&a<.8:i=s[4];break;case a>.81&&a<1:i=s[5];break;case a>1.01&&a<1.4:i=s[6];break;case a>1.41&&a<2.6:i=s[7];break;default:i=s[0]}return i}}}),t.polygonLayer.render(),t.polygonLayer.show()})},get_statistics_chart_data:function(){var t=this;this.http.get("/jobResidenceRatio/getjobResidenceRatio",{},function(e){if(e.success){for(var a=JSON.parse(Decrypt(e.data.results.resultKey)),s=0;s<a.length;s++){var i=a[s];t.street_names.push(i.town.split("街道")[0]),t.office_residence_ratio_data.push((1*i.jobResidenceRatio).toFixed(1)),t.line_chart_data["居住人口就业地"].push(i.liveEmployment),t.line_chart_data["就业人口居住地"].push(i.employmentLive)}t.get_pictorial_bar_chart(),t.get_line_stack_chart()}})},get_pictorial_bar_chart:function(){var t=echarts.init(document.getElementById("pictorial_bar_chart_content")),e={title:n()({text:"各街道职住比统计"},this.$Basice.echart_title),grid:{containLabel:!1,left:30,top:50,bottom:80},xAxis:{type:"category",data:this.street_names,axisLabel:n()({},this.$Basice.coordinate_axis_style.axisLabel,{formatter:function(t){return t.split("").join("\n")}}),axisLine:this.$Basice.coordinate_axis_style.axisLine,splitLine:{show:!1}},yAxis:{type:"value",axisLabel:this.$Basice.coordinate_axis_style.axisLabel,axisLine:this.$Basice.coordinate_axis_style.axisLine,splitLine:{show:!1}},series:[{type:"pictorialBar",label:{show:!0,position:"top",textStyle:{fontSize:12,color:this.$Basice.colors[0]}},itemStyle:{normal:{color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:this.$Basice.colors[0]},{offset:1,color:this.$Basice.colors[0]}],global:!1}}},data:this.office_residence_ratio_data,stack:"a",symbol:"path://M0,10 L10,10 C5.5,10 5.5,5 5,0 C4.5,5 4.5,10 0,10 z"}]};t.setOption(e,!0),window.onresize=function(){t.resize()}},get_line_stack_chart:function(){for(var t=echarts.init(document.getElementById("line_stack_chart_content")),e={title:n()({text:"居住人口就业地和就业人口居住地统计"},this.$Basice.echart_title),tooltip:{trigger:"axis",axisPointer:{lineStyle:{color:"#57617B"}}},legend:n()({data:this.legend_data},this.$Basice.legend),grid:n()({},this.$Basice.grid,{left:60}),xAxis:{type:"category",data:this.street_names,axisLabel:n()({},this.$Basice.coordinate_axis_style.axisLabel,{formatter:function(t){return t.split("").join("\n")}}),axisLine:this.$Basice.coordinate_axis_style.axisLine,splitLine:this.$Basice.coordinate_axis_style.splitLine},yAxis:n()({type:"value",name:"数量"},this.$Basice.coordinate_axis_style),series:[]},a=0;a<this.legend_data.length;a++){var s=this.legend_data[a];e.series.push({name:s,type:"line",smooth:!0,symbol:"circle",symbolSize:5,showSymbol:!1,lineStyle:{normal:{width:1}},areaStyle:{normal:{color:new echarts.graphic.LinearGradient(0,0,0,1,[{offset:0,color:this.$Basice.colors[a],opacity:.3},{offset:.8,color:this.$Basice.colors[a],opacity:0}],!1),shadowColor:"rgba(0, 0, 0, 0.1)",shadowBlur:3}},itemStyle:{normal:{color:this.$Basice.colors[a],borderColor:this.$Basice.colors[a],borderWidth:3}},data:this.line_chart_data[s]})}t.setOption(e,!0),window.onresize=function(){t.resize()}}}),c={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"main_content"},[a("div",{staticClass:"layer_content"},[a("a-select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择图层类型",allowClear:""},on:{change:t.onChangeLayer}},[a("a-select-option",{attrs:{value:"1"}},[t._v("居住人口分布")]),t._v(" "),a("a-select-option",{attrs:{value:"2"}},[t._v("就业人口分布")]),t._v(" "),a("a-select-option",{attrs:{value:"3"}},[t._v("居住人口就业地")]),t._v(" "),a("a-select-option",{attrs:{value:"4"}},[t._v("就业人口居住地")]),t._v(" "),a("a-select-option",{attrs:{value:"5"}},[t._v("职住比")])],1)],1),t._v(" "),t._m(0),t._v(" "),5==t.layer_type_code?a("div",{staticClass:"map_legend chromatic_gradient_map_legend"},[a("a-row",[a("a-col",{staticClass:"chromatic_gradient",attrs:{span:24}},[a("span"),t._v("  0.23 - 0.35\n            ")]),t._v(" "),a("a-col",{staticClass:"mt_10 chromatic_gradient",attrs:{span:24}},[a("span"),t._v("  0.36 - 0.45\n            ")]),t._v(" "),a("a-col",{staticClass:"mt_10 chromatic_gradient",attrs:{span:24}},[a("span"),t._v("  0.46 - 0.55\n            ")]),t._v(" "),a("a-col",{staticClass:"mt_10 chromatic_gradient",attrs:{span:24}},[a("span"),t._v("  0.56 - 0.80\n            ")]),t._v(" "),a("a-col",{staticClass:"mt_10 chromatic_gradient",attrs:{span:24}},[a("span"),t._v("  0.81 - 1.00\n            ")]),t._v(" "),a("a-col",{staticClass:"mt_10 chromatic_gradient",attrs:{span:24}},[a("span"),t._v("  1.01 - 1.40\n            ")]),t._v(" "),a("a-col",{staticClass:"mt_10 chromatic_gradient",attrs:{span:24}},[a("span"),t._v("  1.41 - 2.60\n            ")])],1)],1):t._e()])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"echarts_content animated fadeInRight"},[e("div",{staticClass:"echarts_content_sub"},[e("div",{staticClass:"chart_content_box"},[e("div",{staticClass:"h_100",attrs:{id:"pictorial_bar_chart_content"}})]),this._v(" "),e("div",{staticClass:"chart_content_box"},[e("div",{staticClass:"h_100",attrs:{id:"line_stack_chart_content"}})]),this._v(" "),e("div",{staticClass:"source_content"},[this._v("数据来源：联通手机信令数据")])])])}]};var l=a("VU/8")(r,c,!1,function(t){a("xshk")},"data-v-1ced2dc5",null);e.default=l.exports},xshk:function(t,e){}});